# note: codecov doc is hard to navigate. The info on SPLITTING UP PROJECTS
# can be found here: https://docs.codecov.io/docs/commit-status
# This link also contains helpful other config info not easily found.

fixes:
  # Fix for container builds where the git checkout is at /rsyslog
  - "/rsyslog/::"

  # Fix for GitHub Actions runners
  - "/home/runner/work/rsyslog/rsyslog/::"


# keep Codecov PR comment disabled
comment: false

coverage:
  # to get things started, let's aim at a lower goal. This actually helps
  # to find those areas that we need to concentrate on.
  range: "50...75"
  status:
    project:
      default:
        target: auto
        threshold: 0.5
        informational: true   # non-blocking
      contrib:
        paths: ["contrib/**"] # split status for contrib subtree
        threshold: 0.5
        informational: true   # non-blocking
    patch: false              # disable patch status entirely

ignore:
  # different execution pathes (if not, remove) -- rgerhards, 2018-10-12
  # will be removed soon: https://github.com/rsyslog/rsyslog/issues/2103
  - "contrib/imczmq"
  - "contrib/omczmq"

  # we are currently unable to provide test environment for these:
  - "plugins/imgssapi/**"
  - "plugins/omgssapi/**"

  # these seem to be untestable under CI runs by principle because
  # that would require a service registration
  # see also: https://github.com/rsyslog/rsyslog/issues/3073
  - "runtime/lib_ksi_queue.c"
  - "runtime/lib_ksils12.c"
  - "runtime/lmsig_ksi-ls12.c"
